## Оформление модулей и «чистый код» 1С

**Цель:** сделать код читаемым, предсказуемым и удобным для сопровождения. Ниже — минимальный стандарт, которого достаточно придерживаться уже сейчас.

### Ссылки на ИТС

* Оформление модулей: [https://its.1c.ru/db/v8std#browse:13:-1:31:32](https://its.1c.ru/db/v8std#browse:13:-1:31:32)
* Имена процедур и функций: [https://its.1c.ru/db/v8std#content:454:hdoc](https://its.1c.ru/db/v8std#content:454:hdoc)
* Правила образования имен переменных: [https://its.1c.ru/db/v8std#content:647:hdoc](https://its.1c.ru/db/v8std#content:647:hdoc)

---

### Общие принципы

* **Говорящие имена.** По имени понятно назначение сущности. Без транслита и необъяснимых аббревиатур.
* **Одна ответственность.** Процедура/функция делает понятное законченное действие.
* **Меньше вложенности.** Предпочитайте ранние выходы из функции вместо «пирамид из `Если`».
* **Автоформатирование обязательно.** Перед коммитом всегда выполняйте автоформат (Alt+Shift+F).

---

### Именование переменных

* **Как правильно:** `ТекущийПользователь`, `ДиалогРаботыСКаталогом`, `ЭтоТовар`, `СписокКонтрагентов`.
* **Как нельзя:** `масРеквизитов`, `соотвВидИмя`, `новСтр`, `Н`, `спр`.
* **Правила:**

  * Пишите **полные слова** в стиле `CamelCase` на русском.
  * **Одна буква** допускается **только** для счётчиков циклов (`i`, `j`).
  * Булевы переменные — формулируйте как утверждение: `ЭтоКлиент`, `ОтгрузкаРазрешена`.
  * Коллекции — во множественном числе: `Товары`, `СписокДокументов`.

---

### Имена процедур и функций

* **Процедуры** — c глагола, отвечают на вопрос «что делает?»:
  `Процедура ЗагрузитьКонтрагента()`, `Процедура ОбновитьОстатки()`.
* **Функции** — c существительного, возвращают значение:
  `Функция ДатаНачалаСеанса()`, `Функция СуммаДокумента()`.
* **Булевы функции** — отражают проверяемое условие:
  `Функция ЭтоКлиент()`, `Функция ОтгрузкаРазрешена() : Булево`.

**Плохо**

```bsl
Процедура Клиент() // что делает? непонятно
Функция Проверка() // что проверяет? что возвращает?
```

**Хорошо**

```bsl
Процедура ОткрытьФормуКлиента()
Функция КлиентСуществует(КОДКлиента) Экспорт : Булево
```

---

### Макет модуля (рекомендуемый каркас)

```bsl
&НаКлиенте // или &НаСервере / &НаСервереБезКонтекста — по назначению
Перем ЛокальныйКэш; // переменные модуля — минимум и по делу

#Область Инициализация
Процедура ПриОткрытии(Отказ) Экспорт
    // Коротко инициализируем состояние
КонецПроцедуры
#КонецОбласти

#Область КомандыФормы
Процедура КомандаОбновить(Команда)
    ОбновитьДанныеФормы();
КонецПроцедуры
#КонецОбласти

#Область Логика
Процедура ОбновитьДанныеФормы()
    // Не перегружать UI-логику — выносить в общие модули по возможности
КонецПроцедуры

Функция ЭтоКлиент(Объект) : Булево
    Возврат Не ЗначениеЗаполнено(Объект) ? Ложь : Объект.Вид = Перечисления.ВидыКонтрагентов.Клиент;
КонецФункции
#КонецОбласти

#Область Служебные
Процедура СообщитьОбОшибке(ТекстОшибки)
    Предупреждение(ТекстОшибки);
КонецПроцедуры
#КонецОбласти
```

**Правила:**

* Используйте `#Область / #КонецОбласти` для логических блоков (`Инициализация`, `Команды`, `Логика`, `Служебные`).
* Экспорт помечайте явно. Общие процедуры/функции — размещайте в **общих модулях**.
* Модуль формы — не перегружать бизнес-логикой.

---

### Отступы и форматирование

* Внутри процедур/функций, условных операторов и циклов — **обязательные отступы** (табуляция/стандартный автоформат).
* Пробелы вокруг операторов (`=`, `+`, `-`, `<>`) и после запятых в списках параметров.
* Пустая строка между независимыми логическими блоками улучшает читаемость.

**Пример**

```bsl
Если ЗначениеЗаполнено(Покупатель) Тогда
    Для Каждого Т Из Товары Цикл
        Сумма = Сумма + Т.Стоимость;
    КонецЦикла;
Иначе
    Предупреждение("Покупатель не указан.");
КонецЕсли;
```

---

### Комментарии и сообщения пользователю

* Комментарии — **почему** так сделано, а не «что делает каждая строка».
* Временный «закомментированный код» — удалять перед коммитом.
* Сообщения пользователю — коротко и по делу; без жаргона и внутренних терминов.

---

### Типичные ошибки новичков и как исправить

1. **Непонятные имена**: `новСтр`, `масРеквизитов`.
   → Заменить на `НоваяСтрокаТаблицы`, `МассивРеквизитов`.
2. **Гигантские процедуры** (200+ строк).
   → Разбить по ответственностям, вынести в общие модули.
3. **Лишняя вложенность `Если`–`ИначеЕсли`**.
   → Использовать ранние `Возврат`, разветвление по охранным условиям.
4. **Логика в формах**.
   → Перенести бизнес-логику в общие модули; в формах — только управление UI.
5. **Без автоформата**.
   → Включить привычку: Alt+Shift+F перед каждым коммитом.

---

Соблюдение этих правил уже даёт +80% к читаемости кода и скорости ревью. Если что-то спорно — ориентируйтесь на ссылки ИТС выше и практику команды.
